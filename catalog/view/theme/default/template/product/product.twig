{{ header }}
<div id="product-product" class="container">
	<ul class="breadcrumb">
		{% for breadcrumb in breadcrumbs %}
		<li>
			<a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a>
		</li>
		{% endfor %}
	</ul>
	<div class="row">{{ column_left }}
		{% if column_left and column_right %}
		{% set class = 'col-sm-6' %}
		{% elseif column_left or column_right %}
		{% set class = 'col-sm-9' %}
		{% else %}
		{% set class = 'col-sm-12' %}
		{% endif %}
		<div id="content" class="{{ class }}">
			{{ content_top }}
			<div class="row">

				{% if column_left or column_right %}
				{% set class = 'col-sm-6' %}
				{% else %}
				{% set class = 'col-sm-6' %}
				{% endif %}

				<div class="{{ class }}">
					{% if thumb or images %}
					<div class="product-gallery">
						<div class="row">
							{% if thumb %}
							<div class="col-xs-12 col-md-12" style="margin-bottom: 15px;">
								<div class="product-image-container main-image">
									<a href="{{ popup }}" data-lightbox="product-gallery" data-title="{{ heading_title }} - Imagem Principal" class="product-image-link">
										<img src="{{ thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" id="zoom" class="img-responsive">
										<div class="product-image-overlay">
											<i class="fa fa-search-plus"></i>
										</div>
									</a>
								</div>
							</div>
							{% endif %}
							
							{% if images %}
							{% for image in images %}
							<div class="col-xs-12 col-md-12" style="margin-bottom: 15px;">
								<div class="product-image-container">
									<a href="{{ image.popup }}" data-lightbox="product-gallery" data-title="{{ heading_title }} - Imagem {{ loop.index }}" class="product-image-link">
										<img src="{{ image.thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" class="img-responsive">
										<div class="product-image-overlay">
											<i class="fa fa-search-plus"></i>
										</div>
									</a>
								</div>
							</div>
							{% endfor %}
							{% endif %}
						</div>
					</div>
					{% endif %}

					{# Imagens do filtro #}
					{% if filter_images %}
					<div class="filter-images-section" style="margin-top: 20px;">
						<div class="row">
							{% for image in filter_images %}
							<div class="col-xs-12 col-md-6" style="margin-bottom: 15px;">
								<div class="filter-image-container">
									<a href="{{ image.image_url }}" data-lightbox="filter-gallery" data-title="{{ filter_info.name }}" class="filter-image-link">
										<img src="{{ image.image_url }}" alt="{{ filter_info.name }}" class="img-responsive">
										<div class="filter-image-overlay">
											<i class="fa fa-search-plus"></i>
										</div>
									</a>
								</div>
							</div>
							{% endfor %}
						</div>
					</div>
					{% endif %}
				</div>
				<!-- class -->

				{% if column_left or column_right %}
				{% set class = 'col-sm-6' %}
				{% else %}
				{% set class = 'col-sm-6' %}
				{% endif %}

				<div class="{{ class }} product-details-box">
					<h1 class="title-product">{{ heading_title }}</h1>

					{% if filter_info %}
					<h2 class="title-sub-vehicle">{{ filter_info.name }}</h2>
					{% endif %}

					<ul class="list-unstyled d-flex justify-content-center align-items-center gap-3 mb-1">
						{% if manufacturer %}
						<li>
							<a href="{{ manufacturers }}">
								<span class="badge bg-info">{{ text_manufacturer }}
									{{ manufacturer }}</span>
							</a>
						</li>
						{% endif %}
						<li class="d-none">
							<span class="badge bg-primary">{{ text_model }}
								{{ model }}</span>
						</li>
						{% if reward %}
						<li>{{ text_reward }}
							{{ reward }}</li>
						{% endif %}
						{% if stock < 10 %} <li>
							<span class="badge bg-warning">√öltimas Pe√ßas</span>
							</li>
							{% endif %}
					</ul>

					{% if review_status %}
					<div class="rating">
						<p>
							{% for i in 1..5 %}
							{% if rating < i %} <span class="fa fa-stack">
								<i class="fa fa-star-o fa-stack-1x"></i>
								</span>
								{% else %}
								<span class="fa fa-stack">
									<i class="fa fa-star fa-stack-1x"></i>
									<i class="fa fa-star-o fa-stack-1x"></i>
								</span>
								{% endif %}
								{% endfor %}
								<a href="" onclick="$('a[href=\'#tab-review\']').trigger('click'); return false;">{{
									reviews }}</a>
						</p>
					</div>
					<!-- end rating -->
					{% endif %}

					<div id="product">
						{% if product_variateds %}
						<ul class="gallery-variations">
							{% for pv in product_variateds %}
							<li>
								<a href="{{ pv.href }}"><img src="{{ pv.thumb }}" alt="{{ pv.name }}"
										title="{{ pv.name }}" class="img-thumbnail" /></a>
							</li>
							{% endfor %}
						</ul>
						{% endif %}

						{% if options %}
						<div class="box-product-options">
							<h3 class="hide d-none">{{ text_option }}</h3>
							{% for option in options %}
							{% if option.type == 'select' %}
							<div class="form-group{% if option.required %} required {% endif %}">
								<label class="control-label" for="input-option{{ option.product_option_id }}">{{
									option.name }}</label>
								<select name="option[{{ option.product_option_id }}]"
									id="input-option{{ option.product_option_id }}" class="form-control">
									<option value="">{{ text_select }}</option>
									{% for option_value in option.product_option_value %}
									<option value="{{ option_value.product_option_value_id }}"
										data-option-price="{% if option_value.price %}{{ option_value.price_prefix }}{{ option_value.price }}{% endif %}">
										{{ option_value.name }}
										{% if option_value.price %}
										({{ option_value.price_prefix }}{{ option_value.price }})
										{% endif %}
									</option>
									{% endfor %}
								</select>
							</div>
							{% endif %}

							{% if option.type == 'radio' %}
							<div class="form-group{% if option.required %} required {% endif %}">
								<label class="control-label">{{ option.name }}</label>
								<div id="input-option{{ option.product_option_id }}">
									<div class="radio-toolbar">
										{% for option_value in option.product_option_value %}
										<input {% if option_value.quantity <=0 %}disabled{% endif %} type="radio"
											id="option-{{ option_value.product_option_value_id }}"
											name="option[{{ option.product_option_id }}]"
											value="{{ option_value.product_option_value_id }}"
											data-option-price="{% if option_value.price %}{{ option_value.price_prefix }}{{ option_value.price }}{% endif %}" />
										{% if option_value.product_option_image %} <label data-toggle="tooltip"
											data-placement="top"
											title="{{ option_value.price_prefix }} {{ option_value.price }}"
											class="label-img {% if option_value.quantity <= 0 %}disabled{% endif %}"
											for="option-{{ option_value.product_option_value_id }}"> <img
												src="{{ option_value.product_option_image_thumb }}"
												rel="{{ option_value.product_option_image }}"
												rel1="{{ option_value.product_option_image_zoom }}"
												alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}"
												class="img-thumbnail" /> </label> {% else %} <label
											data-toggle="tooltip" data-placement="top"
											title="{{ option_value.price_prefix }} {{ option_value.price }}"
											class="{% if option_value.quantity <= 0 %}disabled{% endif %}"
											for="option-{{ option_value.product_option_value_id }}"> {{
											option_value.name }} </label> {% endif %} {% endfor %}
									</div>
								</div>
							</div> {% endif %} {% if option.type == 'checkbox' %} <div
								class="form-group{% if option.required %} required {% endif %}"> <label
									class="control-label">{{ option.name }}</label>
								<div id="input-option{{ option.product_option_id }}"> {% for option_value in
									option.product_option_value %} <div class="checkbox"> <label> <input type="checkbox"
												name="option[{{ option.product_option_id }}][]"
												value="{{ option_value.product_option_value_id }}"
												data-option-price="{% if option_value.price %}{{ option_value.price_prefix }}{{ option_value.price }}{% endif %}" />
											{% if option_value.image %} <img src="{{ option_value.image }}"
												alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}"
												class="img-thumbnail" /> {% endif %} {{ option_value.name }} {% if
											option_value.price %} ({{ option_value.price_prefix }}{{ option_value.price
											}}) {% endif %} </label> </div> {% endfor %} </div>
							</div> {% endif %} {% if option.type == 'text' %} <div
								class="form-group{% if option.required %} required {% endif %}"> <label
									class="control-label" for="input-option{{ option.product_option_id }}">{{
									option.name }}</label> <input type="text"
									name="option[{{ option.product_option_id }}]" value="{{ option.value }}"
									placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}"
									class="form-control" /> </div> {% endif %} {% if option.type == 'textarea' %} <div
								class="form-group{% if option.required %} required {% endif %}"> <label
									class="control-label" for="input-option{{ option.product_option_id }}">{{
									option.name }}</label> <textarea name="option[{{ option.product_option_id }}]"
									rows="5" placeholder="{{ option.name }}"
									id="input-option{{ option.product_option_id }}"
									class="form-control">{{ option.value }}</textarea> </div> {% endif %} {% if
							option.type == 'file' %} <div
								class="form-group{% if option.required %} required {% endif %}"> <label
									class="control-label">{{ option.name }}</label> <button type="button"
									id="button-upload{{ option.product_option_id }}"
									data-loading-text="{{ text_loading }}" class="btn btn-default btn-block"> <i
										class="fa fa-upload"></i> {{ button_upload }} </button> <input type="hidden"
									name="option[{{ option.product_option_id }}]" value=""
									id="input-option{{ option.product_option_id }}" /> </div> {% endif %} {% if
							option.type == 'date' %} <div
								class="form-group{% if option.required %} required {% endif %}"> <label
									class="control-label" for="input-option{{ option.product_option_id }}">{{
									option.name }}</label>
								<div class="input-group date"> <input type="text"
										name="option[{{ option.product_option_id }}]" value="{{ option.value }}"
										data-date-format="YYYY-MM-DD" id="input-option{{ option.product_option_id }}"
										class="form-control" /> <span class="input-group-btn"> <button
											class="btn btn-default" type="button"><i class="fa fa-calendar"></i>
										</button> </span> </div>
							</div> {% endif %} {% if option.type == 'datetime' %} <div
								class="form-group{% if option.required %} required {% endif %}"> <label
									class="control-label" for="input-option{{ option.product_option_id }}">{{
									option.name }}</label>
								<div class="input-group datetime"> <input type="text"
										name="option[{{ option.product_option_id }}]" value="{{ option.value }}"
										data-date-format="YYYY-MM-DD HH:mm"
										id="input-option{{ option.product_option_id }}" class="form-control" /> <span
										class="input-group-btn"> <button type="button" class="btn btn-default"> <i
												class="fa fa-calendar"></i> </button> </span> </div>
							</div> {% endif %} {% if option.type == 'time' %} <div
								class="form-group{% if option.required %} required {% endif %}"> <label
									class="control-label" for="input-option{{ option.product_option_id }}">{{
									option.name }}</label>
								<div class="input-group time"> <input type="text"
										name="option[{{ option.product_option_id }}]" value="{{ option.value }}"
										data-date-format="HH:mm" id="input-option{{ option.product_option_id }}"
										class="form-control" /> <span class="input-group-btn"> <button type="button"
											class="btn btn-default"> <i class="fa fa-calendar"></i> </button> </span>
								</div>
							</div> {% endif %} {% endfor %}
						</div><!-- box-product-options --> {% endif %} {% if recurrings %}
						<hr>
						<h3>{{ text_payment_recurring }}</h3>
						<div class="form-group required"> <select name="recurring_id" class="form-control">
								<option value="">{{ text_select }}</option> {% for recurring in recurrings %} <option
									value="{{ recurring.recurring_id }}">{{ recurring.name }}</option> {% endfor %}
							</select>
							<div class="help-block" id="recurring-description"></div>
						</div> {% endif %} <div class="box-price"> {% if price %} <ul class="list-unstyled"> {% if not
								special %} <li class="new"> {{ price }} </li> {% else %} <li class="old">{{ price }}
								</li>
								<li class="new"> {{ special }} </li> {% endif %} {% if tax %} <li>{{ text_tax }} {{ tax
									}}</li> {% endif %} {% if points %} <li>{{ text_points }} {{ points }}</li> {% endif
								%}
							</ul> {% endif %} 
							<div class="d-flex justify-content-center align-items-center gap-5">
								<div class=""><img src="image/catalog/logo_mercadolivre.png" alt="MercadoLivre" class="img-fluid" style="max-width:70px;"></div>
								<div class="form-group custom-quantity-group mb-0">
									<div class="quantity-wrapper d-none"> <input type="number" name="quantity"
											value="{{ minimum }}" size="2" id="input-quantity" class="quantity-input" />
										<!-- <button type="button" class="btn-quantity" id="decrease-qty">-</button> <button type="button" class="btn-quantity" id="increase-qty">+</button> -->
									</div> <input type="hidden" name="product_id" value="{{ product_id }}" /> <button
										type="button" id="button-cart" data-loading-text="{{ text_loading }}"
										class="btn btn-primary btn-lg">{{ button_cart }}</button>
								</div>								
								<div class=""><img src="image/catalog/logo_mercadopago.png" alt="MercadoPago" class="img-fluid" style="max-width:70px;"></div>
							</div>
						</div><!-- box-price --> 
						{% if discounts %} <div class="discount-box">
							<h3>üéâ Compre Mais e Pague Menos! üõí</h3>
							<p>Quanto mais voc√™ compra, mais barato fica! Aproveite:</p>
							<ul> {% for discount in discounts %} <li> <span class="discount-quantity">Comprando {{
										discount.quantity }} unidades</span> pague <span class="discount-price">{{
										discount.price }}</span></li> {% endfor %} </ul>
						</div> {% endif %} {{ parcelamento }} {% if minimum > 1 %} <div class="alert alert-info"> <i
								class="fa fa-info-circle"></i> {{ text_minimum }} </div> {% endif %}
					</div><!-- #product --> <!-- Bot√µes de Favorito e Compara√ß√£o -->
					<div class="btn-group hide d-none"> <button type="button" data-toggle="tooltip"
							class="btn btn-default" title="{{ button_wishlist }}"
							onclick="wishlist.add('{{ product_id }}');"><i class="fa fa-heart"></i> {{ button_wishlist
							}}</button> <button type="button" data-toggle="tooltip" class="btn btn-default"
							title="{{ button_compare }}" onclick="compare.add('{{ product_id }}');"><i
								class="fa fa-exchange"></i> {{ button_compare }}</button> </div>
					<div class="box-shipping-simulate">
						<h4> <i class="fa fa-truck me-2"></i> {{text_title1}} </h4>
						<div class="form-group">
							<div class="row">
								<div class="col-md-12">
									<div class="input-group"> <input type="text" value="{{ postcode }}" maxlength="9"
											name="postcode" id="input-postcode" class="form-control"
											placeholder="Digite o seu CEP" /> <span class="input-group-btn"> <button
												type="button" id="simular" data-loading-text="{{ text_loading }}"
												class="button btn btn-primary">Calcular</button> </span> </div>
								</div>
								<div class="col-md-12 simulacao-frete" style="display:none;"></div>
							</div>
						</div>
						<div class="form-group required hide d-none">
							<div class="col-sm-12"> <label class="control-label" for="input-country">{{ entry_country
									}}</label> <select name="country_id" id="input-country" class="form-control">
									<option value="">{{ text_select }}</option> {% for country in countries %} {% if
									country.country_id == country_id %} <option value="{{ country.country_id }}"
										selected="selected">{{ country.name }} </option> {% else %} <option
										value="{{ country.country_id }}">{{ country.name }}</option> {% endif %} {%
									endfor %}
								</select> </div>
						</div>
						<div class="form-group required hide d-none">
							<div class="col-sm-12"> <label class="control-label" for="input-zone">{{ entry_zone
									}}</label> <select name="zone_id" id="input-zone" class="form-control"></select>
							</div>
						</div>
					</div><!-- box-shipping-simulate -->
					<hr>
					<div class="box-benefits text-start">
						<ul class="list-unstyled mb-0">
							<li class="text-gray pb-2"><i class="fa fa-shield me-2"></i> <b class="text-primary">Compra Garantida</b>, receba o produto que est√° esperando ou devolvemos o dinheiro.</li>
							<li class="text-gray pb-0"><i class="fa fa-star me-2"></i> <b class="text-primary">3 meses de Garantia</b>, diretamente da f√°brica.</li>
						</ul>
					</div>
					{% if product_weight_show %}
					{% if product_width > 0 or product_length > 0 or product_height > 0 %}
					<div class="sizes">
						<ul>
							<li class="icon widht">
								<p>
									<span>Largura:</span>
									<strong>{{ product_width }}
										{{product_length_unit}}</strong>
								</p>
							</li>
							<li class="icon length">
								<p>
									<span>Comprimento:</span>
									<strong>{{ product_length }}
										{{product_length_unit}}</strong>
								</p>
							</li>
							<li class="icon height">
								<p>
									<span>Altura:</span>
									<strong>{{ product_height }}
										{{product_length_unit}}</strong>
								</p>
							</li>
						</ul>
					</div>
					{% endif %}
					{% endif %}

					<hr>

					<div class="card-profile card-infostore">
						<h4 class="text-uppercase font-theme">Informa√ß√µes da Loja</h4>

						<div class="d-flex align-items-center">
							<div class="grow-1">
								<h4 class="font-theme mb-0">Loja Iglucar</h4>
								<p class="text-gray mb-0">Loja oficial no Mercado Livre</p>
							</div>
						</div>

						<div class="d-flex align-items-center my-3">
							<div class="mx-3">
								<i class="fs-1 fa fa-star text-warning mt-3"></i>
							</div>
							<div>
								<h4 class="fs-5 font-theme text-success mb-0">MercadoL√≠der Platinum</h4>
								<p class="text-gray mb-0">√â um dos melhores do site!</p>
							</div>
						</div>

						<div class="card-infoscore">
							<ul>
								<li class="step step1"></li>
								<li class="step step2"></li>
								<li class="step step3"></li>
								<li class="step step4"></li>
								<li class="step step5"></li>
							</ul>
						</div>

						<div class="d-flex justify-content-between text-center my-4 gap-5">
							<div class="col text-center">
								<h4 class="fs-3 font-theme text-success mb-0">{{ sales_count }}</h4>
								<p class="fs-7 text-gray mb-0">Vendas nos <br> √∫ltimos 60 dias</p>
							</div>
							<div class="col border-x-grey text-center">
								<h4 class="font-theme text-success mb-0"><i class="fa fa-envelope-open-o fs-3"></i></h4>
								<p class="fs-7 text-gray mb-0">Presta bom <br> atendimento</p>
							</div>
							<div class="col text-center">
								<h4 class="font-theme text-success mb-0"><i class="fa fa-clock-o fs-2"></i></h4>
								<p class="fs-7 text-gray mb-0">Entrega os produtos <br> dentro do prazo</p>
							</div>
						</div>

						<div class="fs-7"><a href="https://www.mercadolivre.com.br/perfil/RODNEYROBERTOCABALINFILHO" target="_Blank">Ver mais dados dessa loja no Mercado Livre</a></div>

					</div>
				</div>
				<!-- class -->


				
			</div>
			<!-- row -->

			<hr>

			<div class="product-details-container">
				<div class="product-description" id="tab-description">
					<h3>Descri√ß√£o do Produto</h3>
					{{ description }}

					{% if attribute_groups %}
					<div id="tab-specification">
						<table class="table table-bordered">
							{% for attribute_group in attribute_groups %}
							<thead>
								<tr>
									<td colspan="2">
										<strong>{{ attribute_group.name }}</strong>
									</td>
								</tr>
							</thead>
							<tbody>
								{% for attribute in attribute_group.attribute %}
								<tr>
									<td>{{ attribute.name }}</td>
									<td>{{ attribute.text }}</td>
								</tr>
								{% endfor %}
							</tbody>
							{% endfor %}
						</table>
					</div>
					{% endif %}

					{% if tags %}
					<p>{{ text_tags }}
						{% for i in 0..tags|length - 1 %}
						{% if i < (tags|length - 1) %} <a href="{{ tags[i].href }}">{{ tags[i].tag }}</a>,
							{% else %}
							<a href="{{ tags[i].href }}">{{ tags[i].tag }}</a>
							{% endif %}
							{% endfor %}
					</p>
					{% endif %}
				</div>

				{% if review_status %}
				<div class="tab-pane" id="tab-review">
					<h3>Coment√°rios de Clientes</h3>
					<form class="form-horizontal" id="form-review">
						<div id="review"></div>
						<h3>{{ text_write }}</h3>
						{% if review_guest %}
						<div class="box-review">
							<div class="form-group required">
								<div class="col-sm-12">
									<label class="control-label" for="input-name">{{ entry_name }}</label>
									<input type="text" name="name" value="{{ customer_name }}" id="input-name"
										class="form-control" />
								</div>
							</div>
							<div class="form-group required">
								<div class="col-sm-12">
									<label class="control-label" for="input-review">{{ entry_review }}</label>
									<textarea name="text" rows="5" id="input-review" class="form-control"></textarea>
									<div class="help-block">{{ text_note }}</div>
								</div>
							</div>
							<div class="form-group required">
								<div class="col-sm-12">
									<label class="control-label">{{ entry_rating }}</label>
									&nbsp;&nbsp;&nbsp;
									{{ entry_bad }}&nbsp;
									<input type="radio" name="rating" value="1" />
									&nbsp;
									<input type="radio" name="rating" value="2" />
									&nbsp;
									<input type="radio" name="rating" value="3" />
									&nbsp;
									<input type="radio" name="rating" value="4" />
									&nbsp;
									<input type="radio" name="rating" value="5" />
									&nbsp;{{ entry_good }}
								</div>
							</div>
							{{ captcha }}
							<div class="buttons clearfix">
								<div class="pull-left">
									<button type="button" id="button-review" data-loading-text="{{ text_loading }}"
										class="btn btn-primary">{{ button_continue }}</button>
								</div>
							</div>
						</div>
						{% else %}
						{{ text_login }}
						{% endif %}
					</form>
				</div>
				{% endif %}
			</div>
			<!-- product-details-container -->

			{% if products %}
			<h3>{{ text_related }}</h3>
			<div class="row">
				{% set i = 0 %}
				{% for product in products %}
				{% if column_left and column_right %}
				{% set class = 'col-xs-8 col-sm-6' %}
				{% elseif column_left or column_right %}
				{% set class = 'col-xs-6 col-md-4' %}
				{% else %}
				{% set class = 'col-xs-6 col-sm-3' %}
				{% endif %}
				<div class="{{ class }}">
					<div class="product-thumb transition">
						<div class="image">
							<a href="{{ product.href }}"><img src="{{ product.thumb }}" alt="{{ product.name }}"
									title="{{ product.name }}" class="img-responsive" /></a>
							{% if product.width > 0 or product.length > 0 or product.height > 0 %}
							<div class="sizes">
								<ul>
									<li class="icon widht">
										<p>
											<span>Largura:</span>
											<strong>{{ product.width }}
												{{product.length_unit}}</strong>
										</p>
									</li>
									<li class="icon length">
										<p>
											<span>Comprimento:</span>
											<strong>{{ product.length }}
												{{product.length_unit}}</strong>
										</p>
									</li>
									<li class="icon height">
										<p>
											<span>Altura:</span>
											<strong>{{ product.height }}
												{{product.length_unit}}</strong>
										</p>
									</li>
								</ul>
							</div>
							{% endif %}
						</div>
						<div class="caption">
							<h4>
								<a href="{{ product.href }}">{{ product.name }}</a>
							</h4>
							<p>{{ product.description }}</p>
							{% if product.rating %}
							<div class="rating">
								{% for j in 1..5 %}
								{% if product.rating < j %} <span class="fa fa-stack">
									<i class="fa fa-star-o fa-stack-1x"></i>
									</span>
									{% else %}
									<span class="fa fa-stack">
										<i class="fa fa-star fa-stack-1x"></i>
										<i class="fa fa-star-o fa-stack-1x"></i>
									</span>
									{% endif %}
									{% endfor %}
							</div>
							{% endif %}
							{% if product.price %}
							<p class="price">
								{% if not product.special %}
								{{ product.price }}
								{% else %}
								<span class="price-new">{{ product.special }}</span>
								<span class="price-old">{{ product.price }}</span>
								{% endif %}
								{% if product.tax %}
								<span class="price-tax">{{ text_tax }}
									{{ product.tax }}</span>
								{% endif %}
							</p>
							{% endif %}
							{% if product.quantity < 10 %} <ul class="list-unstyled">
								<li>
									<span class="badge badge-warning">√öltimas Pe√ßas</span>
								</li>
								</ul>
								{% endif %}
						</div>
						<div class="button-group">
							<button type="button"
								onclick="cart.add('{{ product.product_id }}', '{{ product.minimum }}');">
								<span class="hidden-xs hidden-sm hidden-md">{{ button_cart }}</span>
								<i class="fa fa-shopping-cart"></i>
							</button>
							<button type="button" data-toggle="tooltip" title="{{ button_wishlist }}"
								onclick="wishlist.add('{{ product.product_id }}');">
								<i class="fa fa-heart"></i>
							</button>
							<button type="button" data-toggle="tooltip" title="{{ button_compare }}"
								onclick="compare.add('{{ product.product_id }}');">
								<i class="fa fa-exchange"></i>
							</button>
						</div>
					</div>
				</div>
				{% if column_left and column_right and (i + 1) % 2 == 0 %}
				<div class="clearfix visible-md visible-sm"></div>
				{% elseif column_left or column_right and (i + 1) % 3 == 0 %}
				<div class="clearfix visible-md"></div>
				{% elseif (i + 1) % 4 == 0 %}
				<div class="clearfix visible-md"></div>
				{% endif %}
				{% set i = i + 1 %}
				{% endfor %}
			</div>
			{% endif %}
			{{ content_bottom }}
		</div>
		<!-- content -->
		{{ column_right }}
	</div>
	<!-- row -->
</div>
<!-- product-product - container -->

<script type="text/javascript">
	$('select[name=\'recurring_id\'], input[name="quantity"]').change(function () {
		$.ajax({
			url: 'index.php?route=product/product/getRecurringDescription',
			type: 'post',
			data: $('input[name=\'product_id\'], input[name=\'quantity\'], select[name=\'recurring_id\']'),
			dataType: 'json',
			beforeSend: function () {
				$('#recurring-description').html('');
			},
			success: function (json) {
				$('.alert-dismissible, .text-danger').remove();

				if (json['success']) {
					$('#recurring-description').html(json['success']);
				}
			}
		});
	});
</script>

<script type="text/javascript">
	$('#button-cart').on('click', function () {
		$.ajax({
			url: 'index.php?route=checkout/cart/add',
			type: 'post',
			data: $('#product input[type=\'text\'], input[name=\'quantity\'], #product input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea'),
			dataType: 'json',
			beforeSend: function () {
				$('#button-cart').button('loading');
			},
			complete: function () {
				$('#button-cart').button('reset');
			},
			success: function (json) {
				$('.alert-dismissible, .text-danger').remove();
				$('.form-group').removeClass('has-error');

				if (json['error']) {
					if (json['error']['option']) {
						for (i in json['error']['option']) {
							var element = $('#input-option' + i.replace('_', '-'));

							if (element.parent().hasClass('input-group')) {
								element.parent().after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
							} else {
								element.after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
							}
						}
					}

					if (json['error']['recurring']) {
						$('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');
					}

					// Highlight any found errors
					$('.text-danger').parent().addClass('has-error');
				}

				if (json['success']) {
					$('.breadcrumb').after('<div class="alert alert-success alert-dismissible">' + json['success'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');

					$('#cart > button').html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> ' + json['total'] + '</span>');

					// $('html, body').animate({
					// 	scrollTop: 0
					// }, 'slow');

					$('#cart > ul').load('index.php?route=common/cart/info ul li');

					// Redirecionar diretamente para o checkout
					window.location.href = 'index.php?route=checkout/checkout';

				}
			},
			error: function (xhr, ajaxOptions, thrownError) {
				alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
			}
		});
	});
</script>

<script type="text/javascript">
	$('.date').datetimepicker({ language: '{{ datepicker }}', pickTime: false });

	$('.datetime').datetimepicker({ language: '{{ datepicker }}', pickDate: true, pickTime: true });

	$('.time').datetimepicker({ language: '{{ datepicker }}', pickDate: false });

	$('button[id^=\'button-upload\']').on('click', function () {
		var node = this;

		$('#form-upload').remove();

		$('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

		$('#form-upload input[name=\'file\']').trigger('click');

		if (typeof timer != 'undefined') {
			clearInterval(timer);
		}

		timer = setInterval(function () {
			if ($('#form-upload input[name=\'file\']').val() != '') {
				clearInterval(timer);

				$.ajax({
					url: 'index.php?route=tool/upload',
					type: 'post',
					dataType: 'json',
					data: new FormData($('#form-upload')[0]),
					cache: false,
					contentType: false,
					processData: false,
					beforeSend: function () {
						$(node).button('loading');
					},
					complete: function () {
						$(node).button('reset');
					},
					success: function (json) {
						$('.text-danger').remove();

						if (json['error']) {
							$(node).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');
						}

						if (json['success']) {
							alert(json['success']);

							$(node).parent().find('input').val(json['code']);
						}
					},
					error: function (xhr, ajaxOptions, thrownError) {
						alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
					}
				});
			}
		}, 500);
	});
</script>

<script type="text/javascript">
	$('#review').delegate('.pagination a', 'click', function (e) {
		e.preventDefault();
		$('#review').fadeOut('slow');
		$('#review').load(this.href);
		$('#review').fadeIn('slow');
	});

	$('#review').load('index.php?route=product/product/review&product_id={{ product_id }}');

	$('#button-review').on('click', function () {
		$.ajax({
			url: 'index.php?route=product/product/write&product_id={{ product_id }}',
			type: 'post',
			dataType: 'json',
			data: $("#form-review").serialize(),
			beforeSend: function () {
				$('#button-review').button('loading');
			},
			complete: function () {
				$('#button-review').button('reset');
			},
			success: function (json) {
				$('.alert-dismissible').remove();

				if (json['error']) {
					$('#review').after('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> ' + json['error'] + '</div>');
				}

				if (json['success']) {
					$('#review').after('<div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> ' + json['success'] + '</div>');

					$('input[name=\'name\']').val('');
					$('textarea[name=\'text\']').val('');
					$('input[name=\'rating\']:checked').prop('checked', false);
				}
			}
		});
	});

	$(document).ready(function () {
		$('.thumbnails').magnificPopup({
			type: 'image',
			delegate: 'a',
			gallery: {
				enabled: true
			},
			callbacks: {
				open: function () {
					var items = this.items;

					// Remove a primeira imagem principal e ajusta a contagem
					if (items.length > 1) {
						items.splice(0, 1);
						this.contentContainer.find('.mfp-counter').text('1 of ' + items.length);
					}
				}
			}
		});
	});
</script>

<script src="catalog/view/javascript/jquery/jquery.mask.min.js" type="text/javascript"></script>
<script type="text/javascript">
	// Mask custom fields
	$("input[name='postcode']").mask('00000-000', {
		reverse: true,
		placeholder: "00000-000"
	});
</script>

<!--Simulador de Frete -->
<script type="text/javascript">
	$('#simular').on('click', function () {
		calcularfrete();

		$.ajax({
			url: 'index.php?route=product/product/quoteProduct',
			type: 'post',
			data: $('#product input[type=\'text\'],#product input[name=\'quantity\'],#product input[type=\'hidden\'],#product input[type=\'radio\']:checked,#product input[type=\'checkbox\']:checked,#product select,#product textarea'),
			dataType: 'json',
			beforeSend: function () {
				$('#simular').button('loading')
			},
			complete: function () {
				$('#simular').button('reset')
			},
			success: function (json) {
				$('.alert, .text-danger').remove();
				$.ajax({
					url: 'index.php?route=product/product/quote',
					type: 'post',
					data: 'country_id=' + $('#input-country').val() + '&zone_id=' + $('#input-zone').val() + '&postcode=' + encodeURIComponent($('#input-postcode').val()),
					dataType: 'json',
					success: function (json) {
						if (json['error']) {
							if (json['error']['warning']) {
								$('.breadcrumb').after('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> ' + json['error']['warning'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
								$('html, body').animate({
									scrollTop: 0
								}, 'slow');
							}
							if (json['error']['postcode']) {
								alert("Aten√ß√£o: Verifique o CEP Digitado!")
							}
						}
						if (json['shipping_method']) {
							$('.simulacao-frete').hide().html();
							var result = '';
							result += `<table class="table table-striped">`;
							result += `<thead>`;
							result += `<tr>`;
							result += `<th><span>Entrega</span></th>`;
							result += `<th><span>Frete</span></th>`;
							result += `</tr>`;
							result += `</thead>`;
							result += `<tbody>`;
							for (i in json['shipping_method']) {
								if (!json['shipping_method'][i]['error']) {
									for (j in json['shipping_method'][i]['quote']) {
										result += `<tr>`;
										result += `<td><span>${json['shipping_method'][i]['quote'][j]['title']
											}</span></td>`;
										result += `<td><span>${json['shipping_method'][i]['quote'][j]['text']
											}</span></td>`;
										result += `</tr>`;
									}
								} else {
									result += '<div class="alert alert-danger">' + json['shipping_method'][i]['error'] + '</div>'
								}
							}
							result += `</tbody>`;
							result += `</table>`;

							$('.simulacao-frete').show().html(result);

							$('input[name=\'shipping_method\']').on('change', function () {
								$('#button-shipping').prop('disabled', false)
							})
						}
					}
				})
			},
			error: function (xhr, ajaxOptions, thrownError) {
				alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
			}
		})
	});
</script>

<script type="text/javascript">
	$(function () { // Esconde os campos
		$('#input-zone').parent().parent().hide();
		$('#input-country').parent().parent().hide();
	});
</script>

<script type="text/javascript">
	function calcularfrete() {
		var cep = $('#input-postcode').val().replace(/[^0-9]/g, '');

		$.getJSON("https://viacep.com.br/ws/" + cep + "/json/?callback=?", function (dados) {

			if (!("erro" in dados)) {
				$('#input-country').find('option[value="30"]').attr('selected', true);
				$.post('index.php?route=product/product/estado_autocompletar&estado=' + unescape(dados.uf), function (zone_id) {
					$.ajax({
						url: 'index.php?route=product/product/country&country_id=30',
						dataType: 'json',
						beforeSend: function () {
							$('#input-country').after(' <i class="fa fa-circle-o-notch fa-spin"></i>');
						},
						complete: function () {
							$('.fa-spin').remove();
						},
						success: function (json) {
							if (json['postcode_required'] == '1') {
								$('#input-postcode').parent().parent().addClass('required');

							} else {
								$('#input-postcode').parent().parent().removeClass('required');
							}

							var html = '<option value="">       {{ text_select }}</option>';

							if (json['zone'] != '') {
								for (i = 0; i < json['zone'].length; i++) {
									html += '<option value="' + json['zone'][i]['zone_id'] + '"';
									if (json['zone'][i]['zone_id'] == zone_id) {
										html += ' selected="selected"';
									}

									html += '>' + json['zone'][i]['name'] + '</option>';
								}
							} else {
								html += '<option value="0" selected="selected">       {{ text_none }}</option>';

							}

							$('#input-zone').html(html);
						}
					});
				});
			}
		});
	}
</script>

<script type="text/javascript" src="{{ parcelamento_js }}"></script>

<script src="catalog/view/javascript/elevatezoom/jquery.elevatezoom-3.0.8.min.js" type="text/javascript"></script>

<!-- Lightbox CSS e JS para imagens do filtro -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>

<style>
/* Estilos para as imagens do produto com lightbox */
.product-gallery {
    margin-bottom: 20px;
}

.product-image-container {
    text-align: center;
    padding: 10px;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    background: #fff;
    position: relative;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s ease;
}

.product-image-container.main-image {
    background: #f8f9fa;
}

.product-image-container:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.product-image-container:hover .product-image-overlay {
    opacity: 1;
}

.product-image-container:hover img {
    transform: scale(1.05);
}

.product-image-link {
    text-decoration: none;
    display: block;
}

.product-image-container img {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    transition: transform 0.3s ease;
}

.product-image-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 123, 255, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
    border-radius: 4px;
}

.product-image-overlay i {
    color: white;
    font-size: 20px;
    font-weight: bold;
}

/* Estilos para as imagens do filtro com lightbox */
.filter-image-container {
    text-align: center;
    padding: 10px;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    background: #fff;
    position: relative;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s ease;
}

.filter-image-container:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.filter-image-container:hover .filter-image-overlay {
    opacity: 1;
}

.filter-image-container:hover img {
    transform: scale(1.05);
}

.filter-image-link {
    text-decoration: none;
    display: block;
}

.filter-image-container img {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    transition: transform 0.3s ease;
}

.filter-image-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 123, 255, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
    border-radius: 4px;
}

.filter-image-overlay i {
    color: white;
    font-size: 20px;
    font-weight: bold;
}

/* Responsivo para mobile */
@media (max-width: 767px) {
    .product-image-overlay i,
    .filter-image-overlay i {
        font-size: 18px;
    }
    
    .product-image-container.main-image {
        border-width: 1px;
    }
}
</style>
<!--
<script type="text/javascript">
	$(document).ready(function () {
		$("#zoom").elevateZoom({ gallery: 'gal1', galleryActiveClass: "active", cursor: 'crosshair', zoomType: 'inner' });
	});

	$(document).on('click', '.label-img', function () {
		var thumb = $(this).children().attr('src');
		var small = $(this).children().attr('rel');
		var zoom = $(this).children().attr('rel1');

		var zoomElement = $('#zoom');

		zoomElement.removeData('zoom-image');
		$('.zoomContainer').remove();

		zoomElement.attr('data-zoom-image', zoom);
		zoomElement.attr('src', small);

		zoomElement.elevateZoom({ gallery: 'gal1', cursor: 'crosshair', zoomType: 'inner' });

		$('.thumbnails').find('a:first').attr('href', zoom);
		$('.product-image .main-image .swiper-slide-active').find('img:first').attr('src', zoom);

		$('.thumb-first').attr({ 'src': small, 'data-zoom-image': zoom });
		$('.zoomWindowContainer div').stop().css("background-image", "url(" + zoom + ")");
	});
</script>
-->

<script>
	document.addEventListener("DOMContentLoaded", function () {
		const quantityInput = document.getElementById("input-quantity");
		const decreaseBtn = document.getElementById("decrease-qty");
		const increaseBtn = document.getElementById("increase-qty");
		const priceElement = document.querySelector(".box-price .new");
		const oldPriceElement = document.querySelector(".box-price .old");
		let basePrice = parseFloat(priceElement ? priceElement.textContent.replace(/[^0-9.,]/g, "").replace(",", ".") : 0);
		let specialPrice = oldPriceElement ? parseFloat(oldPriceElement.textContent.replace(/[^0-9.,]/g, "").replace(",", ".")) : null;
		const minQty = 1;
		const maxQty = parseInt(quantityInput.getAttribute('max')) || 9999;

		function updatePrice() {
			// Valida√ß√£o de quantidade m√≠nima e m√°xima
			let value = parseInt(quantityInput.value);
			if (isNaN(value) || value < minQty) {
				quantityInput.value = minQty;
				value = minQty;
			} else if (value > maxQty) {
				quantityInput.value = maxQty;
				value = maxQty;
			}

			let quantity = value;
			let totalPrice = basePrice * quantity;
			document.querySelectorAll("select[name^='option'], input[type='radio']:checked, input[type='checkbox']:checked").forEach(option => {
				let optionPriceText = null;
				if (option.tagName === "SELECT") {
					optionPriceText = option.options[option.selectedIndex] ? option.options[option.selectedIndex].getAttribute("data-option-price") : null;
				} else {
					optionPriceText = option.getAttribute("data-option-price");
				}

				if (optionPriceText) {
					let priceMatch = optionPriceText.match(/([+-])\s*R?\$?\s*(\d+[\.,]?\d*)/);
					if (priceMatch) {
						let operator = priceMatch[1];
						let optionPrice = parseFloat(priceMatch[2].replace(",", "."));
						if (operator === "+") {
							totalPrice += optionPrice * quantity;
						} else {
							totalPrice -= optionPrice * quantity;
						}
					}
				}
			});

			priceElement.textContent = formatCurrency(totalPrice);
			if (specialPrice) {
				oldPriceElement.textContent = formatCurrency(basePrice * quantity);
			}
		}

		function formatCurrency(value) {
			return new Intl.NumberFormat("pt-BR", { style: "currency", currency: "BRL" }).format(value);
		}

		quantityInput.addEventListener("input", updatePrice);
		document.querySelectorAll("select[name^='option'], input[type='radio'], input[type='checkbox']").forEach(option => {
			option.addEventListener("change", updatePrice);
		});
	});
</script>
{{ footer }}